@(sessionId: Long, page: org.iatoki.judgels.commons.Page[org.iatoki.judgels.jerahmeel.SessionLesson], orderBy: String, orderDir: String, filterString: String)

@import scala.collection.JavaConversions
@import org.iatoki.judgels.jerahmeel.controllers.routes

@import play.i18n.Messages
@import org.iatoki.judgels.commons.views.html.table.tableView
@import org.iatoki.judgels.commons.views.html.table.tableHeadersView
@import org.iatoki.judgels.commons.views.html.table.searchView
@import org.iatoki.judgels.commons.views.html.table.paginationView

@import org.iatoki.judgels.jerahmeel.JidCacheService

@listFunc(newPageIndex: scala.Long, newOrderBy: String, newOrderDir: String, newFilterString: String) = @{routes.SessionLessonController.listLessons(sessionId, newPageIndex, newOrderBy, newOrderDir)}

@searchView(page.getPageIndex, orderBy, orderDir, filterString, listFunc)

<div class="clearfix"></div>

@defining(JidCacheService.getInstance().getDisplayNames(JavaConversions.seqAsJavaList(page.getData.map(s => s.getLessonJid).toSeq))) { displayNamesMap =>
    @for(sessionLesson <- page.getData()) {
        <div class="panel panel-default">
            <div class="panel-body">
                <a href="@routes.SessionLessonController.viewLesson(sessionId, sessionLesson.getId)">
                    @sessionLesson.getAlias
                    - @displayNamesMap.get(sessionLesson.getLessonJid)
                </a>
            </div>
        </div>
    }
}

@paginationView(page, orderBy, orderDir, filterString, listFunc)